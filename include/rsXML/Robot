#ifndef RSXML_ROBOT_
#define RSXML_ROBOT_

#include <string>
#include <vector>

#include <rs/Pos>
#include <rs/Quat>
#include <rs/Vec>
#include <rsRobots/Linkbot>
#include <rsRobots/Mindstorms>
#include <rsXML/Conn>

namespace rsXML {

	// typedefs
	typedef std::vector<Conn*> ConnectorList;

	// class
	class Robot : virtual public rsRobots::Robot {
		// public functions
		public:
			Robot(bool);
			virtual ~Robot(void);

			int addConnector(Conn*);
			Conn* getBaseConnector(void);
			ConnectorList& getConnectorList(void);
			int getConnect(void);
			int getGround(void);
			int getID(void);
			const rs::Vec getJoints(void);
			double* getLED(void);
			std::string getName(void);
			int getOrientation(void);
			const rs::Pos getPosition(void);
			const rs::Quat getQuaternion(void);
			bool getTrace(void);
			virtual void postProcess(void) {};
			void printDebug(void);
			void setConnect(int);
			void setGround(int);
			void setID(int);
			void setJoints(double, double);
			void setJoints(double, double, double);
			void setLED(double, double, double, double);
			void setName(std::string);
			void setOrientation(int);
			void setPosition(double, double, double);
			void setPsi(double);
			void setRotation(double, double, double);

		// data
		protected:
			double _led[4];
			int _connected;
			int _ground;
			int _id;
			int _orientation;
			int _trace;
			ConnectorList _conn;
			Conn *_base;
			rs::Pos _p;
			rs::Quat _q;
			rs::Vec _a;
			std::string _name;
	};

	// class
	class Linkbot : virtual public rsRobots::Linkbot, virtual public Robot {
		public:
			Linkbot(void) :  rsRobots::Robot(rs::LINKBOTT), rsXML::Robot(1) { _a.add(0); _a.add(0); _a.add(0); };
			void postProcess(void);
	};

	// class
	class LinkbotI : public Linkbot {
		public:
			LinkbotI(bool trace) : rsRobots::Robot(rs::LINKBOTI), rsXML::Robot(trace) {};
	};

	// class
	class LinkbotL : public Linkbot {
		public:
			LinkbotL(bool trace) : rsRobots::Robot(rs::LINKBOTL), rsXML::Robot(trace) {};
	};

	// class
	class LinkbotT : public Linkbot {
		public:
			LinkbotT(bool trace) : rsRobots::Robot(rs::LINKBOTT), rsXML::Robot(trace) {};
	};

	// class
	class Mindstorms : virtual public rsRobots::Mindstorms, virtual public Robot {
		public:
			Mindstorms(bool trace) :  rsRobots::Robot(rs::MINDSTORMS), rsXML::Robot(trace) { _a.add(0); _a.add(0); };
			void postProcess(void);
	};

} // namespace rsXML

#endif // RSXML_ROBOT_

