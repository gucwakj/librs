#ifndef RSXML_WRITER_
#define RSXML_WRITER_

#include <string>
#include <vector>

#include <tinyxml2.h>

#include <rsXML/Robot>

namespace rsXML {

	// class
	class Writer {
		// public functions
		public:
			Writer(std::string, const std::string&);
			virtual ~Writer(void);

			tinyxml2::XMLElement* getOrCreateChild(tinyxml2::XMLElement*, const char*);
			tinyxml2::XMLElement* getOrCreateConnector(int, int);
			tinyxml2::XMLElement* getOrCreateElement(const char*, const char*);
			tinyxml2::XMLElement* getOrCreateMarker(int, int);
			tinyxml2::XMLElement* getOrCreateObstacle(int, int);
			tinyxml2::XMLElement* getOrCreateRobot(int, int);
			tinyxml2::XMLElement* getOrCreateSide(tinyxml2::XMLElement*, const char*, int);
			tinyxml2::XMLElement* getRobot(int);
			int save(void);
			int saveFile(std::string);
			void setConnectorSide(tinyxml2::XMLElement*, int, int, int, int, double = 0);
			void setGrid(std::vector<double>);
			void setMarker(tinyxml2::XMLElement*, std::string, double*, double*, double*, int);
			void setObstacle(tinyxml2::XMLElement*, std::string, double*, double*, double*, double*, int);
			void setRobot(tinyxml2::XMLElement*, std::string, double*, double*, double*, double*);
			void setTrace(bool);
			void setUnits(bool);
			tinyxml2::XMLText* toText(bool);
			tinyxml2::XMLText* toText(std::string);

		// private data
		private:
			std::string _path;
			tinyxml2::XMLDocument _doc;
	};

} // namespace rsXML

#endif // RSXML_WRITER_

